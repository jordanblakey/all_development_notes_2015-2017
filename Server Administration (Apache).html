<html>
<head>
  <title>Server Administration (Apache)</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (en-US, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="7094"/>
<h1>Server Administration (Apache)</h1>

<div><span><div><b style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"><span style="font-size: 36px;"><span style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;"><span style="color: rgb(36, 39, 41);">Install FTP Service, PHPmyAdmin</span></span></span></b></div><div>sudo apt-get install vsftpd</div><div>sudo nano /etc/vsftpd.conf</div><div>anonymous_enable=NO</div><div>local_enable=YES</div><div>write_enable=YES</div><div>chroot_local_user=YES</div><div>mkdir /home/username/files</div><div>chown root:root /home/username</div><div> sudo service vsftpd restart</div><div><br/></div><div><hr/></div><div><b><span style="font-size: 36px;"><span style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;"><span style="color: rgb(36, 39, 41);">Maintain and Configure</span></span></span></b></div><div><br/></div><div><div style="margin: 0px 0px 5px; padding: 0px; border: 0px; font-size: 15px; width: 660px; word-wrap: break-word; color: rgb(17, 17, 17); font-family: Ubuntu, Arial, &quot;libra sans&quot;, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div style="margin: 0px 0px 1em; padding: 5px; border: 0px; font-size: 13px; width: auto; max-height: 600px; overflow: auto; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241);"><div><b><span style="background-color: rgb(239, 240, 241);">See all running services</span></b></div><div><code style="margin: 0px; padding: 0px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241);">service --status-all</code></div></div></div></div><div><br/></div><div><p style="margin: 0px 0px 1em; padding: 0px; border: 0px; font-size: 15px; clear: both; color: rgb(17, 17, 17); font-family: Ubuntu, Arial, &quot;libra sans&quot;, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">The output of <code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241); white-space: pre-wrap;">service --status-all</code> lists the state of services controlled by <code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241); white-space: pre-wrap;">System V</code>.</p><p style="margin: 0px 0px 1em; padding: 0px; border: 0px; font-size: 15px; clear: both; color: rgb(17, 17, 17); font-family: Ubuntu, Arial, &quot;libra sans&quot;, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">The <code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241); white-space: pre-wrap;">+</code> indicates the service is running, <code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241); white-space: pre-wrap;">-</code> indicates a stopped service. You can see this by running <code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241); white-space: pre-wrap;">service SERVICENAME status</code> for a <code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241); white-space: pre-wrap;">+</code> and <code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241); white-space: pre-wrap;">-</code> service.</p><p style="margin: 0px 0px 1em; padding: 0px; border: 0px; font-size: 15px; clear: both; color: rgb(17, 17, 17); font-family: Ubuntu, Arial, &quot;libra sans&quot;, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">Some services are managed by <code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241); white-space: pre-wrap;">Upstart</code>. You can check the status of all <code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241); white-space: pre-wrap;">Upstart</code> services with <code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241); white-space: pre-wrap;">sudo initctl list</code>. Any service managed by <code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241); white-space: pre-wrap;">Upstart</code> will also show in the list provided by <code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241); white-space: pre-wrap;">service --status-all</code> but will be marked with a <code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241); white-space: pre-wrap;">?</code>.</p><div style="margin: 0px 0px 1em; padding: 0px; border: 0px; font-size: 15px; clear: both; font-family: Ubuntu, Arial, &quot;libra sans&quot;, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="color: rgb(17, 17, 17);">Reference: <code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241);">man service</code></span></div><div><span style="font-size: 13px;"><span style="font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif;"><span style="background-color: rgb(239, 240, 241);"><span style="color: rgb(17, 17, 17);"><br/></span></span></span></span></div></div></div><div><hr/></div><div><span style="font-size: 36px;"><b><span style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;"><span style="color: rgb(36, 39, 41);">Get LAMP rolling</span></span></b></span></div><div><div style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">sudo apt-get install mysql-server</div><div style="font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;">sudo mysql_secure_installation</div><div style="font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;">sudo apt-get install php5 libapache2-mod-php5 php5-mcrypt</div><div style="font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;">sudo nano /etc/apache2/mods-enabled/dir.conf</div><div style="font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;">sudo service apache2 restart</div><div style="font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;">apt-cache search php5-</div><div style="font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;">apt-cache show php5-xcache</div><div style="font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;">apt-cache show php5-cli</div><div style="font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;">sudo apt-get install php5-cli</div><div style="font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;">cd /var/www/html</div></div><div><span style="font-size: 16px;"><span style="font-family: &quot;Helvetica Neue&quot;, Arial, sans;">vi info.php &gt; </span></span><div style="overflow: auto !important; font-family: monospace, monospace; font-size: 14px; background-color: rgba(0, 0, 0, 0.0470588); border-radius: 3px; display: block; box-sizing: border-box; padding: 13px 17px; margin: 0px auto 28px; width: 745px; color: rgb(0, 0, 0); font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><code style="font-family: monospace, monospace; font-size: 14px; background-color: transparent; border-radius: 3px; color: rgb(58, 58, 58); padding: 0px; margin: 0px; box-sizing: border-box;">&lt;?php<br/>phpinfo();<br/>?&gt;</code></div></div><div><div style="font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;">sudo chown invisible:invisible www</div><div style="font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;">history</div></div><div style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"><br/></div><div><b><span style="font-size: 15px;"><span style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;"><span style="color: rgb(36, 39, 41);">Change owner and group</span></span></span></b></div><div style="font-weight: normal; font-style: normal;font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;"><span style="color: rgb(36, 39, 41);"><span style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;"><span style="font-size: 15px;">invisible@no-name { /var } » sudo chown invisible:invisible www</span></span></span></div><div style="font-weight: normal; font-style: normal;font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;"><span style="font-size: 15px;"><span style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;"><span style="color: rgb(36, 39, 41);"><br/></span></span></span></div><div style="font-weight: normal; font-style: normal;font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;"><b><span style="font-size: 15px;"><span style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;"><span style="color: rgb(36, 39, 41);">Holy Shit</span></span></span></b></div><div style="font-weight: normal; font-style: normal;font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;"><span style="font-size: 15px;"><span style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;"><span style="color: rgb(36, 39, 41);">invisible@no-name { /var/www/html } » history | grep test</span></span></span></div><div style="font-weight: normal; font-style: normal;font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;"><span style="font-size: 15px;"><span style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;"><span style="color: rgb(36, 39, 41);"> 1414  sudo npm install npm@latest -g</span></span></span></div><div style="font-weight: normal; font-style: normal;font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;"><span style="font-size: 15px;"><span style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;"><span style="color: rgb(36, 39, 41);"> 1654  vi test.txt</span></span></span></div><div style="font-weight: normal; font-style: normal;font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;"><span style="font-size: 15px;"><span style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;"><span style="color: rgb(36, 39, 41);"> 1739  sudo apache2ctl configtest</span></span></span></div><div style="font-weight: normal; font-style: normal;font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;"><span style="font-size: 15px;"><span style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;"><span style="color: rgb(36, 39, 41);"> 1741  sudo apache2ctl configtest</span></span></span></div><div style="font-weight: normal; font-style: normal;font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;"><span style="font-size: 15px;"><span style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;"><span style="color: rgb(36, 39, 41);"> 1844  history | grep test</span></span></span></div><div style="font-weight: normal; font-style: normal;font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;"><span style="font-size: 15px;"><span style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;"><span style="color: rgb(36, 39, 41);"><br/></span></span></span></div><div style="font-weight: normal; font-style: normal;font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"><br/></div><div><hr/></div><div><span style="font-size: 36px;"><b>Basic setup</b></span></div><div><span style="font-size: 24px;"><b>On Ubuntu 14.04</b></span></div><div><span style="font-family: monospace, monospace;"><span style="color: rgb(58, 58, 58);"><br/></span></span></div><div><b><span style="font-family: monospace, monospace;"><span style="color: rgb(58, 58, 58);">Install Apache</span></span></b></div><div><span style="font-family: monospace, monospace;"><span style="color: rgb(58, 58, 58);"><span style="background-color: transparent;">sudo apt-get update</span></span></span></div><div><span style="font-family: monospace, monospace;"><span style="color: rgb(58, 58, 58);"><span style="background-color: transparent;">sudo apt-get install apache2</span></span></span></div><div><span style="font-family: monospace, monospace;"><span style="color: rgb(58, 58, 58);"><br/></span></span></div><div><b><span style="font-family: monospace, monospace;"><span style="color: rgb(58, 58, 58);">Check Apache config after changes and before restart</span></span></b></div><div><span style="font-family: monospace, monospace;"><span style="color: rgb(58, 58, 58);"><span style="background-color: transparent;">sudo apache2ctl configtest</span></span></span></div><div><b><span style="font-family: monospace, monospace;"><span style="color: rgb(58, 58, 58);"><br/></span></span></b></div><div><b><span style="font-family: monospace, monospace;"><span style="color: rgb(58, 58, 58);">Main Apache Config File -- edit to configure for FQDN</span></span></b></div><div><span style="font-family: monospace, monospace;"><span style="color: rgb(58, 58, 58);"><span style="background-color: transparent;">sudo nano /etc/apache2/apache2.conf</span></span></span></div><div><span style="font-family: monospace, monospace;"><span style="color: rgb(58, 58, 58);"><br/></span></span></div><div><span style="font-family: monospace, monospace;"><span style="color: rgb(58, 58, 58);">     Append this:</span></span></div><div><span style="font-family: monospace, monospace;"><span style="color: rgb(58, 58, 58);">     ServerName server_domain_or_IP</span></span></div><div><br/></div><div><b><span style="font-family: monospace, monospace;"><span style="color: rgb(58, 58, 58);">Restart Apache</span></span></b></div><div><span style="font-family: monospace, monospace;"><span style="color: rgb(58, 58, 58);"><span style="background-color: transparent;">sudo systemctl restart apache2</span></span></span></div><div>OR </div><div>sudo service apache restart</div><div><br/></div><div><b>Check Ubuntu's firewall rules and make sure apache is listed</b></div><div>sudo ufw app list</div><div><b><br/></b></div><div><b>Check all ports available to Apache</b></div><div>sudo ufw app info &quot;Apache Full&quot;</div><div>WARN: uid is 0 but '/' is owned by 1000</div><div>Profile: Apache Full</div><div>Title: Web Server (HTTP,HTTPS)</div><div>Description: Apache v2 is the next generation of the omnipresent Apache web</div><div>server.</div><div><br/></div><div>Ports:</div><div>  80,443/tcp</div><div><b><br/></b></div><div><b>Allow incoming traffic on these ports</b></div><div><span style="font-family: monospace, monospace;"><span style="color: rgb(58, 58, 58);"><span style="background-color: transparent;">sudo ufw allow in &quot;Apache Full&quot;</span></span></span></div><div><b><br/></b></div><div><b>Now serving on ports 80 and 443 at your IP address or fully qualified domain name if configured</b></div><div><b>Find my ipv4 and ipv6 gateway addresses</b></div><div>ip addr show eth0 | grep inet | awk '{ print $2; }' | sed 's/\/.*$//'</div><div><br/></div><div>192.168.1.118</div><div><b><br/></b></div><div><b>Default router IP Gateway... NOT public IP address</b></div><div>192.168.1.118</div><div><div style="margin: 0px 0px 5px; padding: 0px; border: 0px; width: 660px; word-wrap: break-word; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div style="margin: 0px 0px 1em; padding: 0px; border: 0px; clear: both;"><div style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;">fe80::1e87:2cff:fe5f:9c50</div><div><span style="color: rgb(36, 39, 41);"><span style="font-size: 15px;"><span style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif;">Why most router has default ip gateway 192.168.1.1. How do I change the default gateway? Suppose I have a router and I want to change its default gateway. How do I do it? If it gets changed, does every pc connected get a modified ip?</span></span></span></div></div></div></div><div style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"><b>Get public facing IP address</b></div><div style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"><b>curl http://icanhazip.com</b></div><div><div style="font-family:&quot;Helvetica Neue&quot;, Arial, sans;font-size:16px;">70.121.63.6</div></div><div style="font-family:gotham, helvetica, arial, sans-serif;font-size:14px;"><br/></div><div><br/></div><div><hr/></div><div><br/></div></span>
</div></body></html> 